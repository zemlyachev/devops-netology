## Задание

https://github.com/netology-code/sysadm-homeworks/blob/devsys10/03-sysadmin-07-net/README.md

## Решение

### 1. Проверьте список доступных сетевых интерфейсов на вашем компьютере. Какие команды есть для этого в Linux и в Windows?

> - Linux: `ip link show`, `ip address`
> - Windows: `ipconfig /all`

### 2. Какой протокол используется для распознавания соседа по сетевому интерфейсу? Какой пакет и команды есть в Linux для этого?

> - Протокол `LLDP`
> - Пакет `lldpd`
> - Команда `lldpctl`

### 3. Какая технология используется для разделения L2 коммутатора на несколько виртуальных сетей? Какой пакет и команды есть в Linux для этого? Приведите пример конфига.

> Технология `VLAN`, пакет Linux `vlan`
>
> ```bash
> vi /etc/network/interfaces
>
> auto vlan1400
> iface vlan1400 inet static
>        address 192.168.1.1
>        netmask 255.255.255.0
>        vlan_raw_device eth0
> auto eth0.1400
> iface eth0.1400 inet static
>        address 192.168.1.1
>        netmask 255.255.255.0
>        vlan_raw_device eth0
> ```

### 4. Какие типы агрегации интерфейсов есть в Linux? Какие опции есть для балансировки нагрузки? Приведите пример конфига.

> - Mode-0(balance-rr) – Данный режим используется по умолчанию. Balance-rr обеспечивается балансировку нагрузки и >отказоустойчивость. В данном режиме сетевые пакеты отправляются "по кругу", от первого интерфейса к последнему.
> - Mode-1(active-backup) – Один из интерфейсов работает в активном режиме, остальные в ожидающем. При обнаружении проблемы >на активном интерфейсе производится переключение на ожидающий интерфейс.
> - Mode-2(balance-xor) – Передача пакетов распределяется по типу входящего и исходящего трафика по формуле ((MAC src) XOR >(MAC dest)) % число интерфейсов. Режим дает балансировку нагрузки и отказоустойчивость.
> - Mode-3(broadcast) – Происходит передача во все объединенные интерфейсы, тем самым обеспечивая отказоустойчивость. >Рекомендуется только для использования MULTICAST трафика.
> - Mode-4(802.3ad) – динамическое объединение одинаковых портов. В данном режиме можно значительно увеличить пропускную >способность входящего так и исходящего трафика.
> - Mode-5(balance-tlb) – Адаптивная балансировки нагрузки трафика. Входящий трафик получается только активным интерфейсом, >исходящий распределяется в зависимости от текущей загрузки канала каждого интерфейса.
> - Mode-6(balance-alb) – Адаптивная балансировка нагрузки. Отличается более совершенным алгоритмом балансировки нагрузки >чем Mode-5). Обеспечивается балансировку нагрузки как исходящего так и входящего трафика.
>
> ---
>
> Изменить файл /etc/network/interfaces:
>
> ```
>
> auto bond0
>
> iface bond0 inet static
>    address 10.31.1.5
>    netmask 255.255.255.0
>    network 10.31.1.0
>    gateway 10.31.1.254
>    bond-slaves eth0 eth1
>    bond-mode active-backup
>    bond-miimon 100
>    bond-downdelay 200
>    bond-updelay 200
>
> ```

### 5. Сколько IP адресов в сети с маской /29 ? Сколько /29 подсетей можно получить из сети с маской /24. Приведите несколько примеров /29 подсетей внутри сети 10.10.10.0/24.

> - Всего 8 IP-адресов: 6 хосты, 1 адрес сети, 1 широковещательный
> - Сеть с маской /24 можно разбить на 32 подсети с маской /29
>
> ```bash
>
> vagrant@vagrant:~$ ipcalc 10.10.10.0/24 /29
> Address:   10.10.10.0
> Netmask:   255.255.255.0 = 24
> Wildcard:  0.0.0.255
> =>
> Network:   10.10.10.0/24
> HostMin:   10.10.10.1
> HostMax:   10.10.10.254
> Broadcast: 10.10.10.255
> Hosts/Net: 254                   Class A, Private Internet
>
> Subnets after transition from /24 to /29
>
> Netmask:   255.255.255.248 = 29
> Wildcard:  0.0.0.7
>
> 1.
> Network:   10.10.10.0/29
> HostMin:   10.10.10.1
> HostMax:   10.10.10.6
> Broadcast: 10.10.10.7
> Hosts/Net: 6                     Class A, Private Internet
>
> ...
>
> 32.
> Network:   10.10.10.248/29
> HostMin:   10.10.10.249
> HostMax:   10.10.10.254
> Broadcast: 10.10.10.255
> Hosts/Net: 6                     Class A, Private Internet
>
>
> Subnets:   32
> Hosts:     192
>
> ```

### 6. Задача: вас попросили организовать стык между 2-мя организациями. Диапазоны 10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16 уже заняты. Из какой подсети допустимо взять частные IP адреса? Маску выберите из расчета максимум 40-50 хостов внутри подсети.

> - Маска /26, размер в 62 хоста.
>
> ```bash
>
> vagrant@vagrant:~$ ipcalc 100.64.0.0 -s 50
> Address:   100.64.0.0           01100100.01000000.00000000. 00000000
> Netmask:   255.255.255.0 = 24   11111111.11111111.11111111. 00000000
> Wildcard:  0.0.0.255            00000000.00000000.00000000. 11111111
> =>
> Network:   100.64.0.0/24        01100100.01000000.00000000. 00000000
> HostMin:   100.64.0.1           01100100.01000000.00000000. 00000001
> HostMax:   100.64.0.254         01100100.01000000.00000000. 11111110
> Broadcast: 100.64.0.255         01100100.01000000.00000000. 11111111
> Hosts/Net: 254                   Class A
>
> 1. Requested size: 50 hosts
> Netmask:   255.255.255.192 = 26 11111111.11111111.11111111.11 000000
> Network:   100.64.0.0/26        01100100.01000000.00000000.00 000000
> HostMin:   100.64.0.1           01100100.01000000.00000000.00 000001
> HostMax:   100.64.0.62          01100100.01000000.00000000.00 111110
> Broadcast: 100.64.0.63          01100100.01000000.00000000.00 111111
> Hosts/Net: 62                    Class A
>
> Needed size:  64 addresses.
> Used network: 100.64.0.0/26
> Unused:
> 100.64.0.64/26
> 100.64.0.128/25
>
> ```

### 7. Как проверить ARP таблицу в Linux, Windows? Как очистить ARP кеш полностью? Как из ARP таблицы удалить только один нужный IP?

> |                            | Linux                 | Windows                                           |
> | -------------------------- | --------------------- | ------------------------------------------------- |
> | Проверить ARP таблицу      | `ip neigh`            | `arp -a`                                          |
> | Очистить ARP кеш полностью | `ip neigh flush`      | `arp -a *` , `netsh interface ip delete arpcache` |
> | Удалить из ARP только один | `ip neigh delete dev` | `arp -d`                                          |
